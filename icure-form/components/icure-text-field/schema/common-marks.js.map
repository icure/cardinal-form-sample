{"version":3,"file":"common-marks.js","sourceRoot":"","sources":["../../../../tmp/components/icure-text-field/schema/common-marks.ts"],"names":[],"mappings":"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","sourcesContent":["import { MarkSpec } from 'prosemirror-model'\n\nexport const colors: { [key: string]: [string, string] } = {\n\tI: ['#F44336', 'white'],\n\tII: ['#E91E63', 'white'],\n\tIII: ['#9C27B0', 'white'],\n\tIV: ['#673AB7', 'white'],\n\tV: ['#009688', 'white'],\n\tVI: ['#4CAF50', 'white'],\n\tVII: ['#8BC34A', 'white'],\n\tVIII: ['#03A9F4', 'white'],\n\tIX: ['#00BCD4', 'white'],\n\tX: ['#FFC107', 'black'],\n\tXI: ['#FF9800', 'black'],\n\tXII: ['#FF5722', 'white'],\n\tXIII: ['#795548', 'white'],\n\tXIV: ['#3949AB', 'white'],\n\tXV: ['#C0CA33', 'black'],\n\tXVI: ['#07F87F', 'black'],\n\tXVII: ['#FF6262', 'white'],\n\tXVIII: ['#718792', 'white'],\n\tXIX: ['#00ECB9', 'black'],\n\tXX: ['#FF20A3', 'black'],\n\tXXI: ['#FFCE38', 'black'],\n\tXXII: ['#721F01', 'white'],\n}\n\nconst getColor = (c: string) => colors[c] || [c, 'white']\n\nexport function getMarks(\n\tcontentProvider: (codes: { type: string; code: string }[]) => string,\n\tcolorProvider: (type: string, code: string, isCode: boolean) => string,\n): { [key: string]: MarkSpec } {\n\treturn {\n\t\tem: {\n\t\t\tparseDOM: [{ tag: 'i' }, { tag: 'em' }, { style: 'font-style', getAttrs: (value) => value === 'italic' && null }],\n\t\t\ttoDOM() {\n\t\t\t\treturn ['em']\n\t\t\t},\n\t\t},\n\n\t\tstrong: {\n\t\t\tparseDOM: [{ tag: 'b' }, { tag: 'strong' }, { style: 'font-weight', getAttrs: (value) => /^(bold(er)?|[5-9]\\d{2,})$/.test(value as string) && null }],\n\t\t\ttoDOM() {\n\t\t\t\treturn ['strong']\n\t\t\t},\n\t\t},\n\n\t\tlink: {\n\t\t\tattrs: {\n\t\t\t\thref: {},\n\t\t\t\ttitle: { default: null },\n\t\t\t},\n\t\t\tinclusive: false,\n\t\t\tparseDOM: [\n\t\t\t\t{\n\t\t\t\t\ttag: 'span[data-href]',\n\t\t\t\t\tgetAttrs(dom) {\n\t\t\t\t\t\tconst el = dom as HTMLElement\n\t\t\t\t\t\treturn { href: el.dataset.href, title: el.dataset.title }\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\ttoDOM(node) {\n\t\t\t\tconst urls: string = node.attrs.href\n\t\t\t\tif (urls) {\n\t\t\t\t\tconst refs = urls.split(',').map((url) => {\n\t\t\t\t\t\tconst pos = url.indexOf('://')\n\t\t\t\t\t\tconst protocol = url.substring(0, pos)\n\t\t\t\t\t\tconst code = url.substring(pos + 3)\n\t\t\t\t\t\tconst parts = protocol.split('-')\n\t\t\t\t\t\tconst category = parts[0]\n\t\t\t\t\t\tconst type = parts[1]\n\n\t\t\t\t\t\treturn { category, type, code }\n\t\t\t\t\t})\n\n\t\t\t\t\tconst codes = refs.filter((x) => x.category === 'c')\n\t\t\t\t\tconst ilinks = refs.filter((x) => x.category === 'i')\n\n\t\t\t\t\tconst classes = (refs.some((x) => x.category === 'x') ? ['ext-link'] : []).concat(codes.length ? [`code-count-${codes.length}`] : [])\n\n\t\t\t\t\tconst dataAttributes = (codes.length ? [{ 'data-content': contentProvider(codes) } as { [key: string]: string }] : []).concat(\n\t\t\t\t\t\tilinks.map((c, idx) => ({ [`data-link-color-${idx}`]: colorProvider(c.type, c.code, false) })),\n\t\t\t\t\t)\n\n\t\t\t\t\tconst styles = codes.map((c, idx) => {\n\t\t\t\t\t\tconst color = getColor(colorProvider(c.type, c.code, true))\n\t\t\t\t\t\treturn `--bg-code-color-${idx + 1}: ${color[0]}; --text-code-color-${idx + 1}: ${color[1]};`\n\t\t\t\t\t})\n\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'span',\n\t\t\t\t\t\tdataAttributes.reduce((acc, da) => Object.assign(da, acc), {\n\t\t\t\t\t\t\t['data-href']: node.attrs.href,\n\t\t\t\t\t\t\t['data-title']: node.attrs.title,\n\t\t\t\t\t\t\tclass: classes.join(' '),\n\t\t\t\t\t\t\tstyle: styles.join(''),\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t\treturn ['span', { ['data-href']: node.attrs.href, ['data-title']: node.attrs.title }]\n\t\t\t},\n\t\t},\n\t}\n}\n"]}