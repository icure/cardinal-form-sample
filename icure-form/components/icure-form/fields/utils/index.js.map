{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../tmp/components/icure-form/fields/utils/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { FieldMetadata, FieldValue } from '../../../model'\nimport { Version, VersionedData } from '../../../../generic'\n\nexport const singleValueProvider = (valueProvider?: () => VersionedData<FieldValue>, id?: string) =>\n\tvalueProvider &&\n\t(() =>\n\t\tid && valueProvider\n\t\t\t? {\n\t\t\t\t\t[id]: valueProvider()[id],\n\t\t\t  }\n\t\t\t: {})\n\nexport const handleSingleValueChanged = (handleValueChanged?: (label: string, language: string, value?: FieldValue, id?: string) => string | undefined, id?: string) =>\n\thandleValueChanged && ((label: string, language: string, value: FieldValue) => handleValueChanged?.(label, language, value, id))\n\nexport const handleSingleMetadataChanged = (handleMetadataChanged?: (metadata: FieldMetadata, id?: string) => string | undefined, id?: string) =>\n\thandleMetadataChanged && ((metadata: FieldMetadata) => handleMetadataChanged?.(metadata, id))\n\nexport const extractSingleValue = <V extends FieldValue>(value?: VersionedData<V>, id?: string): [string, Version<V>[]] | [undefined, undefined] => {\n\tif (!value) {\n\t\treturn [undefined, undefined]\n\t}\n\tif (id && value[id]) {\n\t\treturn [id, value[id]]\n\t} else {\n\t\tif (Object.keys(value).length > 1) {\n\t\t\tconsole.log('Warning: multiple values found for a single value field')\n\t\t}\n\t\tconst id = Object.keys(value)[0]\n\t\treturn [id, value[id]]\n\t}\n}\n\nexport const extractValues = <V extends FieldValue>(\n\tvalue: VersionedData<V> | undefined,\n\tmetadataProvider: (id: string, revisions: (string | null)[]) => VersionedData<FieldMetadata>,\n\tid?: string,\n): [string, Version<V>[]][] => {\n\tif (!value) {\n\t\treturn []\n\t}\n\tif (id && value[id]) {\n\t\treturn [[id, value[id]]]\n\t} else {\n\t\treturn Object.entries(value).sort(([id1, v1], [id2, v2]) => {\n\t\t\tconst m1 = metadataProvider(id1, v1[0].revision ? [v1[0].revision] : [null])[id1]\n\t\t\tconst m2 = metadataProvider(id2, v2[0].revision ? [v2[0].revision] : [null])[id2]\n\t\t\treturn (m1?.[0]?.value?.index ?? 0) - (m2?.[0]?.value?.index ?? 0)\n\t\t})\n\t}\n}\n"]}